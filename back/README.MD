<p align="center">
    <img src="https://pbs.twimg.com/profile_images/575314188848889856/F4KWmvVX_200x200.png" alt="Header - complaints">
</p>
<p align="center">
    complaints
</p>

## Sobre o projeto
O projeto visa desenvolver um sistema integrado para a gest√£o de reclama√ß√µes(complaints)

## Stack do projeto

Este projeto √© uma applica√ß√£o web que implementa uma API REST usando o framework FastAPI sem banco de dados real.

Essas e outras libs e tecnologias usadas neste projeto s√£o:
|  Lib      | Vers√£o    |
|-----------|-----------|
| **Runtime**           |
| Python    | v3.11.x   |
| FastAPI   | v0.111.x  |
| Uvicorn   | v.0.29.x  |
| Pydantic  | v2.7.x    |
| **Devtime**           |
| Pytest                        | v8.2.x    |
| Pytest Coverage (pytest-cov)  | v5.0.x    |


### Organiza√ß√£o do projeto
```
‚îú‚îÄüìÅ Desafio-FullStack-nina
/
‚îú‚îÄüìÅ back             ->  [Implementa√ß√£o da API]
‚îÇ   ‚îú‚îÄüêç app.py     ->  [Entrypoint da aplica√ß√£o]
‚îÇ   ‚îú‚îÄüìÅ routers            ->  [rotas da aplica√ß√£o]
‚îÇ   ‚îÇ ‚îÇ ‚îú‚îÄüêç complaints.py
‚îÇ   ‚îÇ ‚îÇ ‚îú‚îÄüêç users.py
‚îÇ   ‚îÇ   ...
‚îÇ   ‚îî‚îÄüìÅ schema    ->  [schemas da aplica√ß√£o]
‚îÇ   ‚îÇ ‚îÇ ‚îú‚îÄüêç complaints.py
‚îÇ   ‚îÇ ‚îÇ ‚îú‚îÄüêç users.py
‚îÇ   ‚îÇ   ...
‚îÇ   ‚îî‚îÄüìÅ database      ->  [configura√ß√µes dos dados da aplica√ß√£o]
‚îÇ   ‚îÇ ‚îÇ ‚îú‚îÄüêç database.py
‚îÇ   ‚îÇ ‚îÇ ‚îú‚îÄüêç db_exception.py
‚îÇ   ‚îÇ ‚îÇ ‚îú‚îÄüêç generate_mocked_data.py
‚îÇ   ‚îÇ ‚îÇ ‚îú‚îÄ{...} mocked_exemple.json
‚îÇ        ...
‚îú‚îÄüìÅ tests           ->  [Testes da aplica√ß√£o]
‚îÇ   ‚îú‚îÄüêç conftest.py ->  [configura√ß√£o do ambiente de testes.]
‚îÇ   ‚îú‚îÄüêç test_nome-modulo.py ->  [nomeclatura dos testes pytest.]
‚îÇ                     
‚îú‚îÄüìÑ .gitignore
‚îú‚îÄüìÑ requirements.txt  ->  [Defini√ß√µes para o projeto]
‚îú‚îÄüìÑ README.md

```

## Rodando a API

Este reposit√≥rio est√° organizado para rodar com Docker ou localmente. Para iniciar, siga as seguintes configura√ß√µes:

### Configura√ß√µes Locais

Este projeto utiliza o pip para gerenciar as depend√™ncias definidas no arquivo `requirements.txt`.

crie o ambiente virtual executando (caso esteja dentro da pasta back):
```sh
python3 -m venv venv
```

ative o ambiente virtual executando (caso esteja dentro da pasta back):
```sh
source venv/bin/activate
```

Para instalar as depend√™ncias, utilize o comando (caso esteja dentro da pasta back):
```sh
pip install -r requirements.txt
```


Ap√≥s isso, o projeto estar√° pronto para ser iniciado com o comando:
```sh
make up-back-end 
```

##### Executar Testes
```sh
make test-backend
```

# Lista de Atividades 

## Atividades Pendentes Backend
- [ ] Implementar um recurso ausente que retorne todas as reclama√ß√µes de um determinado usu√°rio.


## Atividades Conclu√≠das Backend
- [v] Implementar uma funcionalidade de filtragem para a rota get_complaints (```/complaints```) permitindo que ela retorne apenas as reclama√ß√µes onde o campo ```date``` est√° entre os campos ```from_date``` e `` `to_date```, passado atrav√©s de par√¢metros de consulta.
> **Nota:** ser√° necess√°rio para integra√ß√£o com a tabela de complaints(reclama√ß√µes) no frontend

> **Comentario 1:** Como estamos trabalhando em memoria e a quantidade de dados √© pequena algumas implementa√ß√µes s√£o rapidas pela defini√ß√£o de responsabilidades e durabilidade dos dados guardar coisas em mem√≥ria n√£o √© uma boa coisa pois depende que a aplica√ß√£o fique 100% ligada para que um post dure por exemplo.

> **Comentario 2:** Foi detectado um warning ao rodar a aplica√ß√£o fastapi (UserWarning: Valid config keys have changed) solicitando a troca da nomeclatura (allow_population_by_field_name) para populate_by_name

> **Comentario 3:** Foi detectado um uso Deprecated(relacionado ao uso de configura√ß√µes baseadas em classes) no schema de pydantic na hora de rodar os testes e esse warning se encontra no group_bys schema

- [v] Refatore a rota get_complaint (```/complaint/{complaint_id}```) para que a reclama√ß√£o retornada inclua informa√ß√µes sobre o usu√°rio que a registrou. 
> **Nota:** ser√° necess√°rio para integra√ß√£o com a tabela de complaints(reclama√ß√µes) no frontend

> **Comentario 1:** Foi adicionado um parametro UserSchema opcional no schema de  complaints(reclama√ß√µes) para que o response_model se adeque ao que foi solicitado

> **Comentario 2:** talvez seja necessario refatorar para que a logica de jun√ß√£o complaint e usu√°rio fiquem no proprio controller get_complaint

## Atividades Extras 

- [ ] Dockerfile

- [v] testes back-end (usando pytest)
> **Nota de Implementa√ß√£o:** Durante o desenvolvimento, infrentei um desafio relacionado √† configura√ß√£o do ambiente de desenvolvimento com FastAPI. A execu√ß√£o do servidor de desenvolvimento utilizando o comando `fastapi dev app.py` ou `fastapi dev back/app.py` resultava em impossibilidade na execu√ß√£o dos testes do pytest. Isso ocorreu porque o comando `fastapi dev` exige que os caminhos dos m√≥dulos sejam especificados de uma forma (por exemplo, `from back.router import users, complaints`), enquanto o `pytest` requer uma estrutura de importa√ß√£o diferente (ou seja, `from routers import users, complaints`). Para resolver essa incompatibilidade e garantir a integridade dos testes, optamos por utilizar o `uvicorn` para iniciar o servidor de desenvolvimento, com o comando `uvicorn app:app --reload --host 0.0.0.0`. Essa abordagem me permitiu manter os testes enquanto desenvolv√≠amos com FastAPI.

- [ ] adicionar o coverage (pytest-cov)
